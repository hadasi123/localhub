{"ast":null,"code":"// Data management hook - Business Logic Layer\nimport{useState,useEffect,useCallback}from'react';import dataService from'../services/dataService';export const useData=type=>{const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const fetchItems=useCallback(async()=>{try{setLoading(true);setError(null);const data=await dataService.getAllItems(type);setItems(data);}catch(err){setError(err.message);console.error(\"Error fetching \".concat(type,\" items:\"),err);}finally{setLoading(false);}},[type]);const addItem=useCallback(async itemData=>{try{setError(null);const newItem=await dataService.addItem(type,itemData);setItems(prev=>[...prev,newItem]);return newItem;}catch(err){setError(err.message);throw err;}},[type]);const updateItem=useCallback(async(id,updates)=>{try{setError(null);const updatedItem=await dataService.updateItem(type,id,updates);setItems(prev=>prev.map(item=>item.id===id?updatedItem:item));return updatedItem;}catch(err){setError(err.message);throw err;}},[type]);const deleteItem=useCallback(async id=>{try{setError(null);await dataService.deleteItem(type,id);setItems(prev=>prev.filter(item=>item.id!==id));return true;}catch(err){setError(err.message);throw err;}},[type]);const searchItems=useCallback(async query=>{try{setError(null);const results=await dataService.searchItems(type,query);return results;}catch(err){setError(err.message);return[];}},[type]);const getItemsByCategory=useCallback(async category=>{try{setError(null);const results=await dataService.getItemsByCategory(type,category);return results;}catch(err){setError(err.message);return[];}},[type]);const getRecentItems=useCallback(async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;try{setError(null);const results=await dataService.getRecentItems(type,limit);return results;}catch(err){setError(err.message);return[];}},[type]);useEffect(()=>{fetchItems();},[fetchItems]);return{items,loading,error,addItem,updateItem,deleteItem,searchItems,getItemsByCategory,getRecentItems,refresh:fetchItems};};","map":{"version":3,"names":["useState","useEffect","useCallback","dataService","useData","type","items","setItems","loading","setLoading","error","setError","fetchItems","data","getAllItems","err","message","console","concat","addItem","itemData","newItem","prev","updateItem","id","updates","updatedItem","map","item","deleteItem","filter","searchItems","query","results","getItemsByCategory","category","getRecentItems","limit","arguments","length","undefined","refresh"],"sources":["/Users/hadascohen/experiments/localhub/src/hooks/useData.js"],"sourcesContent":["// Data management hook - Business Logic Layer\n\nimport { useState, useEffect, useCallback } from 'react';\nimport dataService from '../services/dataService';\n\nexport const useData = (type) => {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await dataService.getAllItems(type);\n      setItems(data);\n    } catch (err) {\n      setError(err.message);\n      console.error(`Error fetching ${type} items:`, err);\n    } finally {\n      setLoading(false);\n    }\n  }, [type]);\n\n  const addItem = useCallback(async (itemData) => {\n    try {\n      setError(null);\n      const newItem = await dataService.addItem(type, itemData);\n      setItems(prev => [...prev, newItem]);\n      return newItem;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    }\n  }, [type]);\n\n  const updateItem = useCallback(async (id, updates) => {\n    try {\n      setError(null);\n      const updatedItem = await dataService.updateItem(type, id, updates);\n      setItems(prev => prev.map(item => \n        item.id === id ? updatedItem : item\n      ));\n      return updatedItem;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    }\n  }, [type]);\n\n  const deleteItem = useCallback(async (id) => {\n    try {\n      setError(null);\n      await dataService.deleteItem(type, id);\n      setItems(prev => prev.filter(item => item.id !== id));\n      return true;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    }\n  }, [type]);\n\n  const searchItems = useCallback(async (query) => {\n    try {\n      setError(null);\n      const results = await dataService.searchItems(type, query);\n      return results;\n    } catch (err) {\n      setError(err.message);\n      return [];\n    }\n  }, [type]);\n\n  const getItemsByCategory = useCallback(async (category) => {\n    try {\n      setError(null);\n      const results = await dataService.getItemsByCategory(type, category);\n      return results;\n    } catch (err) {\n      setError(err.message);\n      return [];\n    }\n  }, [type]);\n\n  const getRecentItems = useCallback(async (limit = 10) => {\n    try {\n      setError(null);\n      const results = await dataService.getRecentItems(type, limit);\n      return results;\n    } catch (err) {\n      setError(err.message);\n      return [];\n    }\n  }, [type]);\n\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  return {\n    items,\n    loading,\n    error,\n    addItem,\n    updateItem,\n    deleteItem,\n    searchItems,\n    getItemsByCategory,\n    getRecentItems,\n    refresh: fetchItems\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}